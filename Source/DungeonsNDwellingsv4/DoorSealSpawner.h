// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Actor.h"
#include "DoorSeal.h"
#include "DoorSealSpawner.generated.h"

UCLASS()
class DUNGEONSNDWELLINGSV4_API ADoorSealSpawner : public AActor
{
	GENERATED_BODY()
	
public:	
	// Sets default values for this actor's properties
	ADoorSealSpawner();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;
	virtual void Tick(float DeltaSeconds) override;

private:
	/**********************************************************************PRIVATE VARIABLES***************************************************************************/

	bool isArrayUpdated = false;

	//Variables to manage door spawning and management/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	FTransform position;
	FVector const scale = FVector(0.3, 0.95, 1.2);
	float const doorZOffset = 61;
	UPROPERTY(EditAnywhere)
		TArray<ADoorSeal*> doorSealArray;
	TArray<FVector> doorPositionsArray = { FVector(0, 0, 0), FVector(20, 400, 61), FVector(400, 780, 61), FVector(780, 400, 61), FVector(400, 20, 61) };
	TArray<FRotator> doorRotationsArray = { FRotator(0, 0, 0), FRotator(0, 0, 0), FRotator(0, 90, 0), FRotator(0, 0, 0), FRotator(0, 90, 0) };
	UPROPERTY(EditAnywhere)
		int roomsOpened;
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	//Variables to GET and/or SET as necessary to external classes/////////////////////////////////////////////////////////////////////////////////////////////////////
	int roomCount;
	FVector roomPlacementModifier;
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

public:	
	/**********************************************************************PUBLIC FUNCTIONS***************************************************************************/

	//Functions to spawn and manage door placement/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void SetupSpawns();
	void SpawnDoorSeals(FTransform spawnLocation, FVector loc, FRotator rot, FVector scale);
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	//Functions to open/modify doors in relation to player activities//////////////////////////////////////////////////////////////////////////////////////////////////
	void OpenDoors(int roomNum);
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	//Functions to GET and SET key variables between classes///////////////////////////////////////////////////////////////////////////////////////////////////////////
	void GetRoomCount();
	void GetRoomPlacementModifier();
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
};
